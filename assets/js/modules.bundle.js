(()=>{var e={4575:e=>{e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},3913:e=>{function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}e.exports=function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}},9713:e=>{e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},8:e=>{function t(n){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=t=function(e){return typeof e}:e.exports=t=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(n)}e.exports=t}},t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={exports:{}};return e[i](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=n(8),t=n.n(e),i=n(4575),o=n.n(i),r=n(3913),s=n.n(r),a=n(9713),u=n.n(a),c=function(){function e(){o()(this,e),this.url="/cgi-bin/global.pl",this.todo="tl",this.debug=new g({id:"techlog"})}return s()(e,[{key:"setUrl",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/cgi-bin/global.pl";this.url=e}},{key:"setTodo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"tl";this.todo=e}},{key:"send",value:function(e){var t=this;return new Promise((function(n,i){try{var o="".concat(t.url,"?todo=").concat(t.todo,"&h=").concat(rS,"&r=").concat(rI,"&x=Oquoh1jo");t.debug.info(o);var r=new XMLHttpRequest;r.open("POST",o,!0),r.onload=function(){n(r.response)},r.setRequestHeader("Content-type","application/json; charset=utf-8"),r.send(JSON.stringify(e))}catch(e){t.debug.error(e).then((function(){i("error sending to techlog")}))}}))}}]),e}(),l=function(e){return(new c).send(e)},f=function(){function e(){o()(this,e)}return s()(e,null,[{key:"injectMenu",value:function(){var e=document.createElement("div");e.id="es6-menu",e.innerHTML="<div>ES6 enabled</div>",document.getElementsByTagName("body")[0].appendChild(e)}},{key:"injectLink",value:function(e){}},{key:"checkEntries",value:function(){var e=this;window.setTimeout((function(){Object.keys(sessionStorage).forEach((function(t){var n=t.replace("debug:","");document.getElementById("debug_item_".concat(n))||e.injectLink(n)}))}),1e3)}}]),e}();function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g=function(){function e(t){var n=t.id,i=t.on;o()(this,e),this.identifier=n,this.output=[],this.production=!0,!0!==i&&(i=!1),null===this.getSessionConfig()&&!1===this.production&&this.setSessionConfig(i),f.injectLink(this.identifier)}return s()(e,[{key:"log",value:function(e){var t=arguments;if("true"===this.getSessionConfig()){var n=new Promise((function(n){t.length>1&&(e=h({},t)),n({message:e,type:"log"})}));this.output.push(n),this.outputTimer()}}},{key:"debug",value:function(e){var t=arguments;if("true"===this.getSessionConfig()){var n=new Promise((function(n){t.length>1&&(e=h({},t)),n({message:e,type:"debug"})}));this.output.push(n),this.outputTimer()}}},{key:"info",value:function(e){var t=arguments;if("true"===this.getSessionConfig()){var n=new Promise((function(n){t.length>1&&(e=h({},t)),n({message:e,type:"info"})}));this.output.push(n),this.outputTimer()}}},{key:"table",value:function(e){if("true"===this.getSessionConfig()){var t=new Promise((function(t){t({message:e,type:"table"})}));this.output.push(t),this.outputTimer()}}},{key:"warn",value:function(e){var t=arguments;if("true"===this.getSessionConfig()){var n=new Promise((function(n){t.length>1&&(e=h({},t)),n({message:e,type:"warn"})}));this.output.push(n),this.outputTimer()}}},{key:"error",value:function(e){var t=arguments,n=this;return new Promise((function(i){t.length>1&&(e=h({},t)),"true"===n.getSessionConfig()&&console.error(e);var o=Error().stack;l({error:e,trace:o}).then((function(){i()}))}))}},{key:"outputTimer",value:function(){var e=this;return new Promise((function(t){e.timer&&window.clearTimeout(e.timer),e.timer=window.setTimeout((function(){e.triggerOutput().then((function(){t()}))}),3e3)}))}},{key:"triggerOutput",value:function(){var e,t=this;return Promise.all(this.output).then((function(n){(e=n.find((function(e){return"error"===e.type})))||t.getSessionConfig(),"true"===t.getSessionConfig()&&console.group("debug: ".concat(t.identifier)),n.forEach((function(e){var n=e.message;switch(e.type){case"info":console.info(n);break;case"table":console.table(n);break;case"debug":console.debug(n);break;case"warn":console.warn(n);break;case"error":"true"===t.getSessionConfig()&&console.error(n);var i=Error().stack;l({error:n,trace:i});break;default:console.log(n)}}))})).finally((function(){e||t.getSessionConfig(),"true"===t.getSessionConfig()&&console.groupEnd(),t.output=[]}))}},{key:"getSessionConfig",value:function(){return sessionStorage.getItem("debug:".concat(this.identifier))}},{key:"setSessionConfig",value:function(e){sessionStorage.setItem("debug:".concat(this.identifier),e)}}]),e}();new(function(){function e(n){var i=this;o()(this,e),this.settings=n,this.fields=[],this.targets=[],this.results=[],this.request,this.lastSearch=[],this.retryRequest=!0,this.debug=new g({id:"address-api"}),this.parseFields(),document.addEventListener("DOMContentLoaded",(function(){if(i.fields.length>1)for(var e in i.fields)"custom"===i.fields[e].type?i.fields[e].callback(i.settings,i.fields[e]):i.fields[e].id&&i.relatedFieldSelect();else 1===i.fields.length&&("object"===t()(i.fields[0].id)?i.combinedFields():"autocomplete"===i.fields[0].type?i.autoCompleteField():"custom"===i.fields[0].type?i.fields[0].callback(i.settings,i.fields[0]):i.oneFieldSelect())}))}return s()(e,[{key:"parseFields",value:function(){var e=this;this.settings.fields.forEach((function(n){if("object"===t()(n.id)){var i=!0;n.id.forEach((function(e){document.getElementById(e)||(i=!1)})),i&&e.fields.push(n)}else n.element=document.getElementById(n.id),n.element&&e.fields.push(n)})),"function"==typeof this.settings.onLoad&&this.settings.onLoad(this.fields)}},{key:"oneFieldSelect",value:function(){var e=this;this.debug.info("one field check"),this.settings.fields.forEach((function(t){"INPUT"===t.element.nodeName&&(e.debug.info(t),t.element.addEventListener("keyup",(function(){e.lastSearch[t.id]!==t.element.value&&(e.lastSearch[t.id]=t.element.value,window.setTimeout((function(){if(t.targets.forEach((function(e){document.getElementById(e).value=""})),e.validateField(t)){var n="".concat(e.settings.url,"?").concat(e.serializeParams(t.params),"&").concat(t.element.name,"=").concat(t.element.value);e.fetchBackendData(n).then((function(n){e.debug.info(n),e.performCallback(t,n),t.init=!1}))}}),100))})))}))}},{key:"relatedFieldSelect",value:function(){var e=this;this.debug.info("related field check"),this.settings.fields.forEach((function(t){if(e.debug.info(t),t.init){var n="".concat(e.settings.url,"?").concat(e.serializeParams(t.params));e.fetchBackendData(n).then((function(n){e.debug.info(n),e.performCallback(t,n),t.init=!1}))}else e.addEvents(t),t.targets.forEach((function(n){e.targets.push({id:n,source:t.id,element:document.getElementById(n)})}))})),this.debug.info(this.targets)}},{key:"combinedFields",value:function(){var e=this;this.debug.info("combined field check");var t=[];this.settings.fields[0].id.forEach((function(n){var i=document.getElementById(n);e.debug.info(i),t.push(i),i.addEventListener("keyup",(function(){window.setTimeout((function(){if(e.checkFields(t,e.settings.fields[0].targets)){var n="";t.forEach((function(e){n+="&".concat(e.id,"=").concat(e.value)}));var o="".concat(e.settings.url,"?").concat(e.serializeParams(e.settings.fields[0].params)).concat(n);e.fetchBackendData(o).then((function(t){e.debug.info(t),e.targets.forEach((function(e){if(e.id!==i.id){e.element.value="";for(var t=e.element.options.length-1;t>=0;t--)""!==e.element.options[t].value?e.element.options[t]=null:e.element.options[t].selected=!0}})),e.performCallback(e.settings.fields[0],t)}))}}),100)}))}))}},{key:"autoCompleteField",value:function(){var e=this;this.settings.fields.forEach((function(t){e.debug.info(t),"INPUT"===t.element.nodeName&&t.element.addEventListener("keyup",(function(){e.lastSearch[t.id]!==t.element.value&&(e.lastSearch[t.id]=t.element.value,t.element&&!t.element.classList.contains("mooli_error")&&window.setTimeout((function(){var n="",i=!0,o=[];t.required&&t.required.length>0&&(t.required.forEach((function(e){var t=document.getElementById(e);o.push(t),n+="&".concat(t.id,"=").concat(t.value)})),i=e.checkFields(o));var r="".concat(e.settings.url,"?").concat(e.serializeParams(e.settings.fields[0].params),"&").concat(t.id,"=").concat(t.element.value).concat(n);i?e.fetchBackendData(r).then((function(n){e.debug.info(n),e.performCallback(t,n)})):e.debug.info(["Required fields not valid",o])}),100))}))}))}},{key:"checkFields",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=!0;return e.forEach((function(e){e&&(""===e.value||e.classList.contains("mooli_error"))&&(n=!1)})),t.forEach((function(e){var t=document.getElementById(e);n||""===t.value||(t.value="")})),n}},{key:"addEvents",value:function(e){var t=this;"select"===e.type&&e.element.addEventListener("change",(function(){t.results[e.id]=e.element.value;var n="".concat(t.settings.url,"?").concat(t.serializeParams(e.params));t.fetchBackendData(n).then((function(n){t.debug.info(n),t.targets.forEach((function(t){if(t.id!==e.id){t.element.value="";for(var n=t.element.options.length-1;n>=0;n--)""!==t.element.options[n].value?t.element.options[n]=null:t.element.options[n].selected=!0}})),t.performCallback(e,n)}))}))}},{key:"fetchBackendData",value:function(e){var t=this;this.request&&1===this.request.readyState&&this.request.abort();try{return new Promise((function(n,i){window.clearTimeout(t.timeout),t.timeout=window.setTimeout((function(){t.request=new XMLHttpRequest,t.request.open("GET",e,!0),t.request.setRequestHeader("Content-type","application/json; charset=utf-8"),t.request.addEventListener("load",(function(){if(t.request.status>=200&&t.request.status<300)n(JSON.parse(t.request.responseText));else if(0!==t.request.status)if(t.retryRequest)t.retryRequest=!1,window.setTimeout((function(){t.fetchBackendData(e)}),800);else{var o={message:"AddressAPI network error",url:e,status:t.request.status,statusText:t.request.statusText,responseURL:t.request.responseURL,response:t.request.response};t.debug.error(o),i(o)}})),t.request.send()}),300)}))}catch(e){this.debug.error(e)}}},{key:"performCallback",value:function(e,t){if("function"==typeof this.settings.updateFields)try{this.settings.updateFields(e,t)}catch(e){this.debug.error(e)}}},{key:"validateField",value:function(e){if("function"==typeof this.settings.validateField){var t=!1;try{t=this.settings.validateField(e)}catch(e){this.debug.error(e)}return t}return!0}},{key:"serializeParams",value:function(e){var t=[];for(var n in e)if(e.hasOwnProperty(n))if(-1!==e[n].indexOf("${")){var i=e[n].replace("${","").replace("}","");t.push(encodeURIComponent(n)+"="+encodeURIComponent(this.results[i]))}else t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")}}]),e}())({url:"/cgi-bin/wingame.pl",fields:[{id:"zipcode",type:"text",targets:["city"],params:{todo:"get_address_data",get:"city"}}],validateField:function(e){return!e.element.classList.contains("mooli_error")},updateFields:function(e,t){t.success&&function(e,t){e.targets.forEach((function(n){var i=document.getElementById(n);if("SELECT"===i.nodeName){for(var o=i.options.length-1;o>=0;o--)i.options[o].disabled||(i.options[o]=null);if(!t.result[n]||t.result[n]&&!t.result[n].length)return;e.targets.forEach((function(e){var n=document.getElementById(e);n.classList.remove("disabled"),t.result[e].forEach((function(e){var t=document.createElement("option");t.value=e,t.text=e,n.appendChild(t)})),t.result[e].length>1?(n.value="",n.selectedIndex=0):n.selectedIndex=1,n.disabled=!1}))}i.classList.remove("mooli_error")}))}(e,t)}})})()})();